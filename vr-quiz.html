<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Data Types Quiz</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <style>body { margin: 0; overflow: hidden; }</style>
  </head>
  <body>
    <a-scene>
      <!-- Assets for sound -->
      <a-assets>
        <!-- Free sounds hosted online -->
        <audio id="correctSound" src="https://cdn.jsdelivr.net/gh/aframevr/assets/click.mp3"></audio>
        <audio id="wrongSound" src="https://cdn.jsdelivr.net/gh/aframevr/assets/error.mp3"></audio>
      </a-assets>

      <!-- Camera + fuse cursor -->
      <a-entity camera look-controls>
        <a-entity cursor="fuse: true; fuseTimeout: 1500"
                  position="0 0 -1"
                  geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                  material="color: cyan; shader: flat">
        </a-entity>
      </a-entity>

      <!-- 360 Forest Background -->
      <a-sky src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/sechelt.jpg"></a-sky>

      <!-- Question text -->
      <a-entity id="question" position="0 2 -4" text="value: ; align: center; width: 4; color: #FFF;"></a-entity>

      <!-- Options -->
      <a-box id="option1" position="-1 1 -3" depth="0.3" height="0.6" width="1" color="#FFC107" gaze-listener>
        <a-text value="" align="center" position="0 0 0.2" color="#000"></a-text>
      </a-box>
      <a-box id="option2" position="1 1 -3" depth="0.3" height="0.6" width="1" color="#8BC34A" gaze-listener>
        <a-text value="" align="center" position="0 0 0.2" color="#000"></a-text>
      </a-box>
      <a-box id="option3" position="-1 -0.5 -3" depth="0.3" height="0.6" width="1" color="#03A9F4" gaze-listener>
        <a-text value="" align="center" position="0 0 0.2" color="#000"></a-text>
      </a-box>
      <a-box id="option4" position="1 -0.5 -3" depth="0.3" height="0.6" width="1" color="#E91E63" gaze-listener>
        <a-text value="" align="center" position="0 0 0.2" color="#000"></a-text>
      </a-box>

      <!-- Score -->
      <a-entity id="score" position="0 3 -4" text="value: Score: 0; align: center; color: #FFF;"></a-entity>

      <!-- Replay button -->
      <a-box id="replay" position="0 -2 -3" depth="0.3" height="0.5" width="1.5" color="#FF9800"
             visible="false" gaze-listener-replay>
        <a-text value="Replay Quiz" align="center" position="0 0 0.2" color="#000"></a-text>
      </a-box>

      <script>
        // Quiz Data
        const quiz = [
          {q:"Which data type is 25?", options:["Text","Number","Color","Sound"], answer:1},
          {q:"Which data type is 'Blue'?", options:["Text","Number","Color","Video"], answer:2},
          {q:"Which data type is 'Hello'?", options:["Text","Number","Sound","Date"], answer:0},
          {q:"Which data type is 02:30 PM?", options:["Date","Time","Number","Text"], answer:1},
          {q:"Which data type is 12/09/2025?", options:["Date","Color","Sound","Text"], answer:0},
          {q:"Which data type is a YouTube clip?", options:["Text","Video","Number","Color"], answer:1},
          {q:"Which data type is music playing?", options:["Number","Sound","Text","Date"], answer:1}
        ];

        let current = 0;
        let score = 0;
        const boxes = ["option1","option2","option3","option4"];

        // Load a question
        function loadQuestion(index){
          const q = quiz[index];
          document.querySelector("#question").setAttribute("text","value",q.q);
          boxes.forEach((id,i)=>{
            document.querySelector(`#${id} a-text`).setAttribute("value", q.options[i]);
            document.querySelector(`#${id}`).setAttribute("color",["#FFC107","#8BC34A","#03A9F4","#E91E63"][i]);
            document.querySelector(`#${id}`).setAttribute("visible", "true");
          });
        }

        // Gaze-listener for options
        AFRAME.registerComponent('gaze-listener',{
          init: function(){
            this.el.addEventListener('click', ()=>{
              const idx = boxes.indexOf(this.el.id);
              if(idx === quiz[current].answer){
                score += 10;
                document.querySelector('#correctSound').components.sound.playSound();
                this.el.setAttribute("color","#4CAF50");
              } else {
                document.querySelector('#wrongSound').components.sound.playSound();
                this.el.setAttribute("color","#F44336");
              }
              document.querySelector('#score').setAttribute("text","value",`Score: ${score}`);
              setTimeout(()=>{
                current++;
                if(current < quiz.length){
                  loadQuestion(current);
                } else {
                  document.querySelector("#question").setAttribute("text","value","ðŸŽ‰ Quiz Finished!");
                  boxes.forEach(b=>document.querySelector(`#${b}`).setAttribute("visible","false"));
                  document.querySelector("#replay").setAttribute("visible","true");
                }
              },1500);
            });
          }
        });

        // Gaze-listener for replay
        AFRAME.registerComponent('gaze-listener-replay',{
          init: function(){
            this.el.addEventListener('click', ()=>{
              score = 0;
              current = 0;
              document.querySelector('#score').setAttribute("text","value","Score: 0");
              document.querySelector("#replay").setAttribute("visible","false");
              loadQuestion(current);
            });
          }
        });

        loadQuestion(current);
      </script>
    </a-scene>
  </body>
</html>
